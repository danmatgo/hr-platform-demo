<% content_for :title, "Payroll runs" %>

<div class="w-full">
  <div class="flex items-center justify-between mb-6">
    <div>
      <h1 class="text-2xl font-semibold text-gray-900">Payroll</h1>
      <p class="text-sm text-gray-600">Process and review payroll runs</p>
    </div>
    <div class="flex items-center space-x-2">
      <%= link_to "New payroll run", new_payroll_run_path, class: "btn btn-primary" %>
    </div>
  </div>

  <div class="card mb-6"><div class="card-body">
    <h2 class="card-title">Generate payroll</h2>
    <%= form_with url: generate_payroll_path, method: :post, local: true, class: "mt-3 grid grid-cols-1 md:grid-cols-4 gap-3" do |form| %>
      <div><%= date_field_tag :start_date, Date.current.beginning_of_month, class: "rounded-md border px-3 py-2 w-full" %></div>
      <div><%= date_field_tag :end_date, Date.current.end_of_month, class: "rounded-md border px-3 py-2 w-full" %></div>
      <div class="md:col-span-2"><%= submit_tag "Generate Payroll", class: "btn btn-secondary w-full" %></div>
    <% end %>
  </div></div>

  <% if @payroll_runs.any? %>
    <%= render partial: 'shared/table', locals: { columns: [
      { header: 'Period', key: :pay_period_description },
      { header: 'Status', key: :status },
      { header: 'Hours', key: :total_hours },
      { header: 'Overtime', key: :total_overtime },
      { header: 'Gross', key: :gross_pay },
      { header: 'Processed', key: :processed_at }
    ], rows: @payroll_runs } %>
  <% else %>
    <div class="card"><div class="card-body">
      <p class="text-sm text-gray-600">No payroll runs found.</p>
    </div></div>
  <% end %>
</div>
