<div data-controller="table" class="table-container">
  <table class="table">
    <thead>
      <tr>
        <% columns.each_with_index do |col, i| %>
          <th data-action="click->table#sort" data-table-key="<%= col[:key] || "col#{i}" %>"><%= col[:header] %></th>
        <% end %>
        <% if defined?(include_actions) && include_actions %>
          <th>Actions</th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% rows.each do |row| %>
        <tr class="odd:bg-gray-50">
          <% columns.each do |col| %>
            <td>
              <% if col[:proc] %>
                <%= col[:proc].call(row) %>
              <% else %>
                <%= row.public_send(col[:key]) %>
              <% end %>
            </td>
          <% end %>
          <% if defined?(include_actions) && include_actions %>
            <td class="whitespace-nowrap">
              <div class="flex items-center space-x-2">
                <%= icon_button_edit(row) %>
                <%= icon_button_delete(row) %>
              </div>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
